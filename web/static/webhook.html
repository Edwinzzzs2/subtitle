<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Webhookæ¶ˆæ¯æ¥æ”¶å™¨</title>
    <link rel="icon" type="image/x-icon" href="/static/favicon.ico">
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div class="container">
        <header>
            <div class="header-title">
                <h1>ğŸ“¨ Webhookæ¶ˆæ¯æ¥æ”¶å™¨</h1>
                <span class="version-tag">v1.0.6</span>
            </div>
            <div class="nav-links">
                <a href="/" class="nav-link">ä¸»é¡µ</a>
                <a href="/webhook" class="nav-link active">Webhook</a>
            </div>
        </header>

        <main>
            <!-- Webhookä¿¡æ¯é¢æ¿ -->
            <section class="webhook-panel">
                <div class="webhook-header">
                    <h2 class="webhook-title">Webhookæ¶ˆæ¯</h2>
                    <div class="webhook-meta">
                        <span class="meta-item">æ€»æ¶ˆæ¯æ•°: <strong id="webhook-count">0</strong></span>
                        <span class="meta-item">æœ€åæ›´æ–°: <strong id="last-webhook-time">-</strong></span>
                    </div>
                    <div class="webhook-controls">
                        <div class="webhook-filter-container">
                            <svg class="filter-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M10 18a7.952 7.952 0 0 0 4.897-1.688l4.396 4.396 1.414-1.414-4.396-4.396A7.952 7.952 0 0 0 18 10c0-4.411-3.589-8-8-8s-8 3.589-8 8 3.589 8 8 8zm0-14c3.309 0 6 2.691 6 6s-2.691 6-6 6-6-2.691-6-6 2.691-6 6-6z"></path></svg>
                            <input type="text" id="webhook-filter-input" class="webhook-filter-input" placeholder="è¿‡æ»¤æ¶ˆæ¯...">
                        </div>
                        <div>
                            <button id="clear-webhook-btn" class="btn btn-outline btn-sm">æ¸…ç©º</button>
                            <button id="refresh-webhook-btn" class="btn btn-outline btn-sm">åˆ·æ–°</button>
                        </div>
                    </div>
                </div>
                <div id="webhook-container" class="webhook-container">
                    <div class="webhook-empty-state">
                        <div class="empty-icon">ğŸ“­</div>
                        <p>æš‚æ— Webhookæ¶ˆæ¯</p>
                        <p class="webhook-endpoint">Webhookæ¥æ”¶åœ°å€: <code id="webhook-url"></code></p>
                    </div>
                </div>
            </section>

            <!-- Webhookä¿¡æ¯ -->
            <section class="webhook-info">
                <h2>Webhookä½¿ç”¨è¯´æ˜</h2>
                <div class="info-content">
                    <p>æ‚¨å¯ä»¥å‘ä»¥ä¸‹åœ°å€å‘é€POSTè¯·æ±‚ï¼Œç³»ç»Ÿå°†æ¥æ”¶å¹¶æ˜¾ç¤ºè¯·æ±‚å†…å®¹ï¼š</p>
                    <div class="code-block">
                        <code id="webhook-endpoint"></code>
                        <button id="copy-endpoint-btn" class="btn btn-sm">å¤åˆ¶</button>
                    </div>
                    <h3>ç¤ºä¾‹è¯·æ±‚ï¼š</h3>
                    <pre class="code-example">curl -X POST \
  <span id="curl-endpoint"></span> \
  -H "Content-Type: application/json" \
  -d '{"message": "Hello from webhook", "data": {"key": "value"}}'</pre>
                </div>
            </section>
        </main>

        <footer>
            <p>è§†é¢‘æ–‡ä»¶ç›‘å¬å™¨ &copy; 2024</p>
        </footer>
    </div>

    <script src="/static/script.js"></script>
    <script src="/static/webhook.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // è®¾ç½®Webhook URL
            const protocol = window.location.protocol;
            const host = window.location.host;
            const webhookUrl = `${protocol}//${host}/api/webhook`;
            
            document.getElementById('webhook-url').textContent = webhookUrl;
            document.getElementById('webhook-endpoint').textContent = webhookUrl;
            document.getElementById('curl-endpoint').textContent = webhookUrl;
            
            // å¤åˆ¶æŒ‰é’®åŠŸèƒ½
            document.getElementById('copy-endpoint-btn').addEventListener('click', function() {
                navigator.clipboard.writeText(webhookUrl).then(function() {
                    alert('Webhookåœ°å€å·²å¤åˆ¶åˆ°å‰ªè´´æ¿');
                });
            });
        });
    </script>
</body>
</html>